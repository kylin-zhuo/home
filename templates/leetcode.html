<!DOCTYPE html>
<html>
<head>
	<title>Leetcode Visualization</title>
</head>
<body>

	<div class="title">
		<p>Leetcode Solution Visualization</p>
	</div>

	<div class="question-wrapper"></div>

	<!-- modal to show answers-->
	<div id="answerModal" class="modal">
	  <div class="modal-content">
	    <span class="close">&times;</span>
	    <p style="font-weight: bold;">Question <a id="questionId">1</a> - <a id="questionTitle">Two Sum</a></p>
      <p class="questionDescription">Given an array of integers nums and an integer target, return indices of the two numbers such that they add up to target.
You may assume that each input would have exactly one solution, and you may not use the same element twice.
You can return the answer in any order.</p>
      <div class="input-field" >
        <div class="" style="display: flex">
          <div class="input-unit">
            <label class="label1" for="f1">array</label>
            <input id="input1" type="text" name="f1" value="[1,3,4,6,8]">
          </div>
          <div class="input-unit">
            <label class="label2" for="f2">target</label>
            <input id="input2" class="" type="text" name="f2" value="10">
          </div>
          <input id="show-answer-btn" type="button" name="show-answer" value="GO">
        </div>
      </div>
			<div class="svg-banner">
        <svg id="svg-container">
          <rect id="svg-border"/>
          <!-- <g>
            <rect x="50" y="50" rx="10" ry="10" width="50" height="50"
             style="fill:#456789;stroke:black;stroke-width:2;opacity:0.65" />
            <text x="50" y="50" transform="translate(22 28)">1</text>
          </g>
          <g>
            <rect x="100" y="50" rx="10" ry="10" width="50" height="50"
             style="fill:#456789;stroke:black;stroke-width:2;opacity:0.65" />
            <text x="100" y="50" transform="translate(22 28)">2</text>
          </g> -->
        </svg>
			</div>
	  </div>
	</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://d3js.org/d3.v6.min.js"></script>
  <script src="/static/js/leetcode/svg-array.js"></script>
  <script src="/static/js/leetcode/execute.js"></script>
  <script src="/static/js/leetcode/utils.js"></script>

	<script type="text/javascript">

    var questions = {{questions}};
    var modal = document.getElementById("answerModal");

    function createQuestionButtons() {
      var wrapper = document.querySelector(".question-wrapper");
      for (var i in questions) {
        var qid = questions[i];
        var btn = document.createElement("BUTTON");
        btn.innerHTML = qid;
        wrapper.appendChild(btn);
      }
      for (var j in wrapper.children) {
        wrapper.children[j].onclick = function() {
          console.log("Question #", this.innerHTML, "shows answer modal");
          modal.style.display = "block";
          $("#questionId").get(0).innerHTML = this.innerHTML;
        };
      }
    }

		// Get the <span> element that closes the modal
		var closeAnswerButton = document.getElementsByClassName("close")[0];
		closeAnswerButton.onclick = function() {
		  modal.style.display = "none";
      clearSVG();
		}

		window.onclick = function(event) {
		  if (event.target == modal) {
		    modal.style.display = "none";
        clearSVG();
		  }
		}

    createQuestionButtons();

    // Tester, show modal
    // document.querySelector(".question-wrapper").children[0].click();

    document.querySelector("#show-answer-btn").onclick = function () {
      var qid = parseInt($('#questionId').get(0).innerHTML);
      console.log("check the animation for question", qid);
      execute(qid);
    };

	</script>

	<style type="text/css">
    svg {
      width: 100%;
      min-height: 400px;
    }

    #svg-border {
      width: 100%;
      min-height: 400px;
      fill: none;
      stroke-width:1px;
      stroke: rgb(13,4,55);
      rx: 15px;
      ry: 15px;
      opacity: 50%;
    }

    .questionDescription {
      font-size: 14px;
      line-height: 20px;
    }

    .input-field {
      margin-bottom: 5px;
    }

    .input-unit {
      padding: 5px;
    }

    .label1 {
      opacity: 0.5;
    }

    .label2 {
      opacity: 0.5;
    }

		body {
			background-color: #ffe;
		}

		.title {
		  position: relative;
		}

		.title p {
			text-align: center;
			font-family: sans-serif;
			font-weight: bold;
		}

    .question-wrapper {
      margin: 10px 30px 20px;
    }

    .question-wrapper button {
      width: 40px;
      height: 24px;
      margin: 1px;
    }

		.modal {
			display: none;
			position: fixed; /* Stay in place */
			z-index: 1; /* Sit on top */
			padding-top: 100px; /* Location of the box */
			left: 0;
			top: 0;
			width: 100%; /* Full width */
			height: 100%; /* Full height */
			overflow: auto; /* Enable scroll if needed */
			background-color: rgb(0,0,0); /* Fallback color */
			background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
		}

		/* Modal Content */
		.modal-content {
		  background-color: #fefefe;
		  margin: auto;
		  padding: 15px;
		  border: 2px solid #888;
      /* border-radius: 5px; */
		  width: 80%;
			font-family: sans-serif;
		}

		/* The Close Button */
		.close {
		  color: #aaaaaa;
		  float: right;
		  font-size: 28px;
		  font-weight: bold;
		}

		.close:hover,
		.close:focus {
		  color: #000;
		  text-decoration: none;
		  cursor: pointer;
		}

		.svg-banner {
			max-width: 100%;
			max-height: 100%;
			width: auto;
			height: auto;
		}
	</style>

</body>

</html>
